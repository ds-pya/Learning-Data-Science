class CalbakLlmResultParser {
  static final _specialChars = RegExp(r'["\'{}\n\t`]+');

  /// raw: LLM이 뱉은 한 줄
  /// label: 'title' 또는 'location'
  ///
  /// 예)
  /// title: "홍길동 결혼식"      → 홍길동 결혼식
  /// location: 강남 웨딩홀        → 강남 웨딩홀
  /// "title"::{'삼성동 코엑스'}   → 삼성동 코엑스
  static String? parseSimpleLabel(String raw, String label) {
    if (raw.trim().isEmpty) return null;

    // 1) 특수문자 제거
    var t = raw.replaceAll(_specialChars, '').trim();

    // 2) 라벨 위치 찾기
    final idx = t.toLowerCase().indexOf(label.toLowerCase());
    if (idx == -1) {
      // 라벨 없으면 전체 문자열 반환
      return t.isEmpty ? null : t;
    }

    // 3) label 뒤의 텍스트만 추출
    // label "title" → "title" + 5글자
    var v = t.substring(idx + label.length).trim();

    // 콜론 한 번 더 있다면 제거
    if (v.startsWith(':')) v = v.substring(1).trim();

    return v.isEmpty ? null : v;
  }
}